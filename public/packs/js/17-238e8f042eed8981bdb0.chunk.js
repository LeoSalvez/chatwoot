(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1652:function(t,e,A){"use strict";A.d(e,"c",(function(){return i})),A.d(e,"a",(function(){return s})),A.d(e,"b",(function(){return l}));A(14),A(9),A(20),A(23),A(59),A(77),A(24),A(10),A(21),A(29),A(30);function n(t,e){var A=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),A.push.apply(A,n)}return A}function a(t){for(var e=1;e<arguments.length;e++){var A=null!=arguments[e]?arguments[e]:{};e%2?n(Object(A),!0).forEach((function(e){r(t,e,A[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(A)):n(Object(A)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(A,e))}))}return t}function r(t,e,A){return e in t?Object.defineProperty(t,e,{value:A,enumerable:!0,configurable:!0,writable:!0}):t[e]=A,t}var o=function(t){return t.attribute_key?t.filter_operator?"is_present"!==t.filter_operator&&"is_not_present"!==t.filter_operator&&(!t.values||Array.isArray(t.values)&&0===t.values.length)?"VALUE_REQUIRED":"days_before"===t.filter_operator&&(parseInt(t.values,10)<=0||parseInt(t.values,10)>=999)?"VALUE_MUST_BE_BETWEEN_1_AND_998":null:"FILTER_OPERATOR_REQUIRED":"ATTRIBUTE_KEY_REQUIRED"},i=function(t){var e={};return t.forEach((function(t,A){var n=o(t);n&&(e["filter_".concat(A)]=n)})),e},s=function(t){return t&&0!==t.length?t.reduce((function(t,e,A){var n=function(t){return["mute_conversation","snooze_conversation","resolve_conversation","remove_assigned_team"].includes(t.action_name)||t.action_params&&0!==t.action_params.length?null:"ACTION_PARAMETERS_REQUIRED"}(e);return n&&(t["action_".concat(A)]=n),t}),{}):{actions:"ATLEAST_ONE_ACTION_REQUIRED"}},l=function(t){var e,A,n=function(t){var e={};return["name","description","event_name"].forEach((function(A){t[A]||(e[A]="".concat(A.charAt(0).toUpperCase()+A.slice(1)," is required"))})),e}(t),r=(e=t.conditions,A={},e&&0!==e.length?(e.forEach((function(t,e){var n=o(t);n&&(A["condition_".concat(e)]=n)})),A):(A.conditions="ATLEAST_ONE_CONDITION_REQUIRED",A)),i=s(t.actions);return a(a(a({},n),r),i)}},1898:function(t,e,A){"use strict";A(142),A(24),A(10),A(21),A(29),A(23),A(30),A(83);var n={props:["teams","value"],data:function(){return{selectedTeams:[],message:""}},mounted:function(){var t=this.value.team_ids;this.selectedTeams=t,this.message=this.value.message},methods:{updateValue:function(){this.$emit("input",{team_ids:this.selectedTeams.map((function(t){return t.id})),message:this.message})}}},a=(A(2095),A(8)),r=Object(a.a)(n,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER"),multiple:"","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.teams,"allow-empty":!1},on:{input:t.updateValue},model:{value:t.selectedTeams,callback:function(e){t.selectedTeams=e},expression:"selectedTeams"}}),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{rows:"4",placeholder:t.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER")},domProps:{value:t.message},on:{input:[function(e){e.target.composing||(t.message=e.target.value)},t.updateValue]}})],1)])}),[],!1,null,"286ddf03",null).exports,o=(A(9),A(22),A(33),A(64));function i(t,e,A,n,a,r,o){try{var i=t[r](o),s=i.value}catch(l){return void A(l)}i.done?e(s):Promise.resolve(s).then(n,a)}var s={components:{Spinner:A(200).a},props:{initialFileName:{type:String,default:""}},data:function(){return{uploadState:"idle",label:this.$t("AUTOMATION.ATTACHMENT.LABEL_IDLE")}},mounted:function(){this.initialFileName&&(this.label=this.initialFileName,this.uploadState="uploaded")},methods:{onChangeFile:function(t){var e,A=this;return(e=regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A.uploadState="processing",A.label=A.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADING"),e.prev=2,n=t.target.files[0],e.next=6,A.$store.dispatch("automations/uploadAttachment",n);case 6:a=e.sent,A.$emit("input",[a]),A.uploadState="uploaded",A.label=A.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOADED"),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),A.uploadState="failed",A.label=A.$t("AUTOMATION.ATTACHMENT.LABEL_UPLOAD_FAILED"),Object(o.a)(A.$t("AUTOMATION.ATTACHMENT.UPLOAD_ERROR"));case 17:case"end":return e.stop()}}),e,null,[[2,12]])})),function(){var t=this,A=arguments;return new Promise((function(n,a){var r=e.apply(t,A);function o(t){i(r,n,a,o,s,"next",t)}function s(t){i(r,n,a,o,s,"throw",t)}o(void 0)}))})()}}},l=s;A(2097);function c(t,e){var A=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),A.push.apply(A,n)}return A}function p(t){for(var e=1;e<arguments.length;e++){var A=null!=arguments[e]?arguments[e]:{};e%2?c(Object(A),!0).forEach((function(e){u(t,e,A[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(A)):c(Object(A)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(A,e))}))}return t}function u(t,e,A){return e in t?Object.defineProperty(t,e,{value:A,enumerable:!0,configurable:!0,writable:!0}):t[e]=A,t}var d={components:{AutomationActionTeamMessageInput:r,AutomationActionFileInput:Object(a.a)(l,(function(){var t=this,e=t._self._c;return e("label",{staticClass:"input-wrapper",class:t.uploadState},["processing"!==t.uploadState?e("input",{class:"processing"===t.uploadState?"disabled":"",attrs:{type:"file",name:"attachment"},on:{change:t.onChangeFile}}):t._e(),t._v(" "),"processing"===t.uploadState?e("Spinner"):t._e(),t._v(" "),"idle"===t.uploadState?e("fluent-icon",{attrs:{icon:"file-upload"}}):t._e(),t._v(" "),"uploaded"===t.uploadState?e("fluent-icon",{staticClass:"success-icon",attrs:{icon:"checkmark-circle",type:"outline"}}):t._e(),t._v(" "),"failed"===t.uploadState?e("fluent-icon",{staticClass:"error-icon",attrs:{icon:"dismiss-circle",type:"outline"}}):t._e(),t._v(" "),e("p",{staticClass:"file-button"},[t._v(t._s(t.label))])],1)}),[],!1,null,"40dc9872",null).exports,WootMessageEditor:A(900).a},props:{value:{type:Object,default:function(){return null}},actionTypes:{type:Array,default:function(){return[]}},dropdownValues:{type:Array,default:function(){return[]}},errorMessage:{type:String,default:""},showActionInput:{type:Boolean,default:!0},initialFileName:{type:String,default:""},isMacro:{type:Boolean,default:!1}},computed:{action_name:{get:function(){return this.value?this.value.action_name:null},set:function(t){var e=this.value||{};this.$emit("input",p(p({},e),{},{action_name:t}))}},action_params:{get:function(){return this.value?this.value.action_params:null},set:function(t){var e=this.value||{};this.$emit("input",p(p({},e),{},{action_params:t}))}},inputType:function(){var t=this;return this.actionTypes.find((function(e){return e.key===t.action_name})).inputType},actionInputStyles:function(){return{"has-error":this.errorMessage,"is-a-macro":this.isMacro}},castMessageVmodel:{get:function(){return Array.isArray(this.action_params)?this.action_params[0]:this.action_params},set:function(t){this.action_params=t}}},methods:{removeAction:function(){this.$emit("removeAction")},resetAction:function(){this.$emit("resetAction")}}},m=(A(2099),Object(a.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter",class:t.actionInputStyles},[e("div",{staticClass:"filter-inputs"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.action_name,expression:"action_name"}],staticClass:"action__question",class:{"full-width":!t.showActionInput},on:{change:[function(e){var A=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.action_name=e.target.multiple?A:A[0]},function(e){return t.resetAction()}]}},t._l(t.actionTypes,(function(A){return e("option",{key:A.key,domProps:{value:A.key}},[t._v("\n        "+t._s(A.label)+"\n      ")])})),0),t._v(" "),t.showActionInput?e("div",{staticClass:"filter__answer--wrap"},[t.inputType?e("div",{staticClass:"w-full"},["search_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1,"option-height":104},model:{value:t.action_params,callback:function(e){t.action_params=e},expression:"action_params"}})],1):"multi_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),multiple:"","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1,"option-height":104},model:{value:t.action_params,callback:function(e){t.action_params=e},expression:"action_params"}})],1):"email"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.action_params,expression:"action_params"}],staticClass:"answer--text-input",attrs:{type:"email",placeholder:t.$t("AUTOMATION.ACTION.EMAIL_INPUT_PLACEHOLDER")},domProps:{value:t.action_params},on:{input:function(e){e.target.composing||(t.action_params=e.target.value)}}}):"url"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.action_params,expression:"action_params"}],staticClass:"answer--text-input",attrs:{type:"url",placeholder:t.$t("AUTOMATION.ACTION.URL_INPUT_PLACEHOLDER")},domProps:{value:t.action_params},on:{input:function(e){e.target.composing||(t.action_params=e.target.value)}}}):t._e(),t._v(" "),"attachment"===t.inputType?e("AutomationActionFileInput",{attrs:{"initial-file-name":t.initialFileName},model:{value:t.action_params,callback:function(e){t.action_params=e},expression:"action_params"}}):t._e()],1):t._e()]):t._e(),t._v(" "),t.isMacro?t._e():e("woot-button",{attrs:{icon:"dismiss",variant:"clear","color-scheme":"secondary"},on:{click:t.removeAction}})],1),t._v(" "),"team_message"===t.inputType?e("AutomationActionTeamMessageInput",{attrs:{teams:t.dropdownValues},model:{value:t.action_params,callback:function(e){t.action_params=e},expression:"action_params"}}):t._e(),t._v(" "),"textarea"===t.inputType?e("WootMessageEditor",{staticClass:"action-message",attrs:{rows:"4","enable-variables":"",placeholder:t.$t("AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER")},model:{value:t.castMessageVmodel,callback:function(e){t.castMessageVmodel=e},expression:"castMessageVmodel"}}):t._e(),t._v(" "),t.errorMessage?e("p",{staticClass:"filter-error"},[t._v("\n    "+t._s(t.errorMessage)+"\n  ")]):t._e()],1)}),[],!1,null,"0c2c8ba6",null));e.a=m.exports},1923:function(t,e,A){var n=A(65),a=A(2096);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var r={insert:"head",singleton:!1};n(a,r);t.exports=a.locals||{}},1924:function(t,e,A){var n=A(65),a=A(2098);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var r={insert:"head",singleton:!1};n(a,r);t.exports=a.locals||{}},1925:function(t,e,A){var n=A(65),a=A(2100);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var r={insert:"head",singleton:!1};n(a,r);t.exports=a.locals||{}},1926:function(t,e,A){"use strict";A.d(e,"c",(function(){return n})),A.d(e,"b",(function(){return a})),A.d(e,"d",(function(){return r})),A.d(e,"a",(function(){return o})),A.d(e,"e",(function(){return i})),A.d(e,"f",(function(){return s}));var n=[{attribute_key:"message_type",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],a=[{attribute_key:"browser_language",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],r=[{attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",custom_attribute_type:""}],o=[{action_name:"assign_agent",action_params:[]}],i=[{id:"incoming",name:"Incoming Message"},{id:"outgoing",name:"Outgoing Message"}],s=[{id:"nil",name:"None"},{id:"low",name:"Low"},{id:"medium",name:"Medium"},{id:"high",name:"High"},{id:"urgent",name:"Urgent"}]},1927:function(t,e,A){"use strict";A(83),A(10),A(32),A(9),A(34),A(14),A(17),A(20),A(67),A(59),A(44);function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return r(t,e);var A=Object.prototype.toString.call(t).slice(8,-1);"Object"===A&&t.constructor&&(A=t.constructor.name);if("Map"===A||"Set"===A)return Array.from(t);if("Arguments"===A||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var A=0,n=new Array(e);A<e;A++)n[A]=t[A];return n}e.a=function(t){return JSON.parse(JSON.stringify(t)).map((function(t){var e;return Array.isArray(t.action_params)?t.action_params=e=(e=t.action_params).length<=0?[]:e.every((function(t){return"string"===typeof t}))||e.every((function(t){return"number"===typeof t}))?a(e):e.map((function(t){return t.id})):"object"===n(t.action_params)?t.action_params=function(t){return t.action_params.id?t.action_params=[t.action_params.id]:t.action_params=[t.action_params],t.action_params}(t):t.action_params?t.action_params=[t.action_params]:t.action_params=[],t}))}},2095:function(t,e,A){"use strict";A(1923)},2096:function(t,e,A){(e=A(66)(!0)).push([t.i,"\n.multiselect[data-v-286ddf03] {\n  margin: var(--space-smaller) var(--space-zero);\n}\ntextarea[data-v-286ddf03] {\n  margin-bottom: var(--space-zero);\n}\n","",{version:3,sources:["/home/leonardo/chatwoot/app/javascript/dashboard/components/widgets/AutomationActionTeamMessageInput.vue"],names:[],mappings:";AAuDA;EACA,8CAAA;AACA;AACA;EACA,gCAAA;AACA",file:"AutomationActionTeamMessageInput.vue",sourcesContent:['<script>\nexport default {\n  // The value types are dynamic, hence prop validation removed to work with our action schema\n  // eslint-disable-next-line vue/require-prop-types\n  props: [\'teams\', \'value\'],\n  data() {\n    return {\n      selectedTeams: [],\n      message: \'\',\n    };\n  },\n  mounted() {\n    const { team_ids: teamIds } = this.value;\n    this.selectedTeams = teamIds;\n    this.message = this.value.message;\n  },\n  methods: {\n    updateValue() {\n      this.$emit(\'input\', {\n        team_ids: this.selectedTeams.map(team => team.id),\n        message: this.message,\n      });\n    },\n  },\n};\n<\/script>\n\n<template>\n  <div>\n    <div class="multiselect-wrap--small">\n      <multiselect\n        v-model="selectedTeams"\n        track-by="id"\n        label="name"\n        :placeholder="$t(\'AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER\')"\n        multiple\n        selected-label\n        :select-label="$t(\'FORMS.MULTISELECT.ENTER_TO_SELECT\')"\n        deselect-label=""\n        :max-height="160"\n        :options="teams"\n        :allow-empty="false"\n        @input="updateValue"\n      />\n      <textarea\n        v-model="message"\n        rows="4"\n        :placeholder="$t(\'AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER\')"\n        @input="updateValue"\n      />\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.multiselect {\n  margin: var(--space-smaller) var(--space-zero);\n}\ntextarea {\n  margin-bottom: var(--space-zero);\n}\n</style>\n']}]),t.exports=e},2097:function(t,e,A){"use strict";A(1924)},2098:function(t,e,A){(e=A(66)(!0)).push([t.i,"\ninput[type='file'][data-v-40dc9872] {\ndisplay: none\n}\n.input-wrapper[data-v-40dc9872] {\ndisplay: flex;\nheight: 2.25rem;\ncursor: pointer;\nalign-items: center;\nborder-radius: 0.125rem;\nborder-width: 1px;\nborder-style: dashed;\n--tw-border-opacity: 1;\nborder-color: hsl(209 95.0% 90.1% / 1);\n--tw-bg-opacity: 1;\nbackground-color: rgb(255 255 255 / 1);\npadding-top: 0.25rem;\npadding-bottom: 0.25rem;\npadding-left: 0.5rem;\npadding-right: 0.5rem;\nfont-size: 0.75rem;\nline-height: 1rem\n}\n@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)) {\n.input-wrapper[data-v-40dc9872] {\nborder-color: hsl(209 95.0% 90.1% / var(--tw-border-opacity))\n}\n}\n@supports (color: rgb(0 0 0 / 0)) and (top: var(--f)) {\n.input-wrapper[data-v-40dc9872] {\nbackground-color: rgb(255 255 255 / var(--tw-bg-opacity))\n}\n}\n[data-v-40dc9872]:is(.dark .input-wrapper) {\n--tw-border-opacity: 1;\nborder-color: hsl(209 100% 60.6% / 1);\n--tw-bg-opacity: 1;\nbackground-color: hsl(200 7.0% 8.8% / 1)\n}\n@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)) {\n[data-v-40dc9872]:is(.dark .input-wrapper) {\nborder-color: hsl(209 100% 60.6% / var(--tw-border-opacity));\nbackground-color: hsl(200 7.0% 8.8% / var(--tw-bg-opacity))\n}\n}\n.success-icon[data-v-40dc9872] {\nmargin-right: 0.5rem;\n--tw-text-opacity: 1;\ncolor: hsl(151 55.0% 41.5% / 1)\n}\n@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)) {\n.success-icon[data-v-40dc9872] {\ncolor: hsl(151 55.0% 41.5% / var(--tw-text-opacity))\n}\n}\n[data-v-40dc9872]:is(.dark .success-icon) {\n--tw-text-opacity: 1;\ncolor: hsl(152 57.5% 37.6% / 1)\n}\n@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)) {\n[data-v-40dc9872]:is(.dark .success-icon) {\ncolor: hsl(152 57.5% 37.6% / var(--tw-text-opacity))\n}\n}\n.error-icon[data-v-40dc9872] {\nmargin-right: 0.5rem;\n--tw-text-opacity: 1;\ncolor: hsl(358 75.0% 59.0% / 1)\n}\n@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)) {\n.error-icon[data-v-40dc9872] {\ncolor: hsl(358 75.0% 59.0% / var(--tw-text-opacity))\n}\n}\n[data-v-40dc9872]:is(.dark .error-icon) {\n--tw-text-opacity: 1;\ncolor: hsl(358 69.4% 55.2% / 1)\n}\n@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)) {\n[data-v-40dc9872]:is(.dark .error-icon) {\ncolor: hsl(358 69.4% 55.2% / var(--tw-text-opacity))\n}\n}\n.processing[data-v-40dc9872] {\ncursor: not-allowed;\nopacity: 0.9\n}\n.file-button[data-v-40dc9872] {\nmargin-bottom: 0px;\nwidth: 100%;\noverflow: hidden;\ntext-overflow: ellipsis;\nwhite-space: nowrap\n}\n","",{version:3,sources:["/home/leonardo/chatwoot/app/javascript/dashboard/components/widgets/AutomationFileInput.vue"],names:[],mappings:";AA6EA;AAAA;AAAA;AAGA;AAAA,aAAA;AAAA,eAAA;AAAA,eAAA;AAAA,mBAAA;AAAA,uBAAA;AAAA,iBAAA;AAAA,oBAAA;AAAA,sBAAA;AAAA,sCAAA;AAAA,kBAAA;AAAA,sCAAA;AAAA,oBAAA;AAAA,uBAAA;AAAA,oBAAA;AAAA,qBAAA;AAAA,kBAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAA;AAAA,qCAAA;AAAA,kBAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4DAAA;AAAA;AAAA;AAAA;AAGA;AAAA,oBAAA;AAAA,oBAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA,oBAAA;AAAA,oBAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA,mBAAA;AAAA;AAAA;AAGA;AAAA,kBAAA;AAAA,WAAA;AAAA,gBAAA;AAAA,uBAAA;AAAA;AAAA",file:"AutomationFileInput.vue",sourcesContent:["<script>\nimport { useAlert } from 'dashboard/composables';\nimport Spinner from 'shared/components/Spinner.vue';\nexport default {\n  components: {\n    Spinner,\n  },\n  props: {\n    initialFileName: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      uploadState: 'idle',\n      label: this.$t('AUTOMATION.ATTACHMENT.LABEL_IDLE'),\n    };\n  },\n  mounted() {\n    if (this.initialFileName) {\n      this.label = this.initialFileName;\n      this.uploadState = 'uploaded';\n    }\n  },\n  methods: {\n    async onChangeFile(event) {\n      this.uploadState = 'processing';\n      this.label = this.$t('AUTOMATION.ATTACHMENT.LABEL_UPLOADING');\n      try {\n        const file = event.target.files[0];\n        const id = await this.$store.dispatch(\n          'automations/uploadAttachment',\n          file\n        );\n        this.$emit('input', [id]);\n        this.uploadState = 'uploaded';\n        this.label = this.$t('AUTOMATION.ATTACHMENT.LABEL_UPLOADED');\n      } catch (error) {\n        this.uploadState = 'failed';\n        this.label = this.$t('AUTOMATION.ATTACHMENT.LABEL_UPLOAD_FAILED');\n        useAlert(this.$t('AUTOMATION.ATTACHMENT.UPLOAD_ERROR'));\n      }\n    },\n  },\n};\n<\/script>\n\n<template>\n  <label class=\"input-wrapper\" :class=\"uploadState\">\n    <input\n      v-if=\"uploadState !== 'processing'\"\n      type=\"file\"\n      name=\"attachment\"\n      :class=\"uploadState === 'processing' ? 'disabled' : ''\"\n      @change=\"onChangeFile\"\n    />\n    <Spinner v-if=\"uploadState === 'processing'\" />\n    <fluent-icon v-if=\"uploadState === 'idle'\" icon=\"file-upload\" />\n    <fluent-icon\n      v-if=\"uploadState === 'uploaded'\"\n      icon=\"checkmark-circle\"\n      type=\"outline\"\n      class=\"success-icon\"\n    />\n    <fluent-icon\n      v-if=\"uploadState === 'failed'\"\n      icon=\"dismiss-circle\"\n      type=\"outline\"\n      class=\"error-icon\"\n    />\n    <p class=\"file-button\">{{ label }}</p>\n  </label>\n</template>\n\n<style scoped>\ninput[type='file'] {\n  @apply hidden;\n}\n.input-wrapper {\n  @apply flex h-9 bg-white dark:bg-slate-900 py-1 px-2 items-center text-xs cursor-pointer rounded-sm border border-dashed border-woot-100 dark:border-woot-500;\n}\n.success-icon {\n  @apply text-green-500 dark:text-green-600 mr-2;\n}\n.error-icon {\n  @apply text-red-500 dark:text-red-600 mr-2;\n}\n\n.processing {\n  @apply cursor-not-allowed opacity-90;\n}\n.file-button {\n  @apply whitespace-nowrap overflow-hidden text-ellipsis w-full mb-0;\n}\n</style>\n"]}]),t.exports=e},2099:function(t,e,A){"use strict";A(1925)},2100:function(t,e,A){(e=A(66)(!0)).push([t.i,".filter[data-v-0c2c8ba6]{margin-bottom:0.5rem;border-radius:0.375rem;border-width:1px;border-style:solid;--tw-border-opacity:1;border-color:hsl(209 12.2% 93.2% / 1);--tw-bg-opacity:1;background-color:hsl(209 13.3% 95.3% / 1);padding:0.5rem\n}\n@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)){\n.filter[data-v-0c2c8ba6]{border-color:hsl(209 12.2% 93.2% / var(--tw-border-opacity));background-color:hsl(209 13.3% 95.3% / var(--tw-bg-opacity))\n}\n}\n[data-v-0c2c8ba6]:is(.dark .filter){--tw-border-opacity:1;border-color:hsl(206 6.0% 43.5% / 1);--tw-bg-opacity:1;background-color:hsl(198 6.6% 15.8% / 1)\n}\n@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)){\n[data-v-0c2c8ba6]:is(.dark .filter){border-color:hsl(206 6.0% 43.5% / var(--tw-border-opacity));background-color:hsl(198 6.6% 15.8% / var(--tw-bg-opacity))\n}\n}.filter.is-a-macro[data-v-0c2c8ba6]{margin-bottom:0px;border-radius:0px;border-width:0px;--tw-bg-opacity:1;background-color:rgb(255 255 255 / 1);padding:0px\n}@supports (color: rgb(0 0 0 / 0)) and (top: var(--f)){\n.filter.is-a-macro[data-v-0c2c8ba6]{background-color:rgb(255 255 255 / var(--tw-bg-opacity))\n}\n}[data-v-0c2c8ba6]:is(.dark .filter.is-a-macro){--tw-bg-opacity:1;background-color:hsl(207 5.6% 31.6% / 1)\n}@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)){\n[data-v-0c2c8ba6]:is(.dark .filter.is-a-macro){background-color:hsl(207 5.6% 31.6% / var(--tw-bg-opacity))\n}\n}.no-margin-bottom[data-v-0c2c8ba6]{margin-bottom:0px\n}.filter.has-error[data-v-0c2c8ba6]{--tw-border-opacity:1;border-color:hsl(360 81.7% 87.8% / 1);--tw-bg-opacity:1;background-color:hsl(351 89.0% 96.0% / 1)\n}@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)){\n.filter.has-error[data-v-0c2c8ba6]{border-color:hsl(360 81.7% 87.8% / var(--tw-border-opacity));background-color:hsl(351 89.0% 96.0% / var(--tw-bg-opacity))\n}\n}[data-v-0c2c8ba6]:is(.dark .filter.has-error){border-color:hsl(358 65.0% 48.7% / 0.5);background-color:hsl(358 65.0% 40.4% / 0.5)\n}.filter-inputs[data-v-0c2c8ba6]{display:flex\n}.filter-error[data-v-0c2c8ba6]{margin-top:0.25rem;margin-bottom:0.25rem;margin-left:0px;margin-right:0px;display:block;--tw-text-opacity:1;color:hsl(358 75.0% 59.0% / 1)\n}@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)){\n.filter-error[data-v-0c2c8ba6]{color:hsl(358 75.0% 59.0% / var(--tw-text-opacity))\n}\n}[data-v-0c2c8ba6]:is(.dark .filter-error){--tw-text-opacity:1;color:hsl(359 69.5% 74.3% / 1)\n}@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)){\n[data-v-0c2c8ba6]:is(.dark .filter-error){color:hsl(359 69.5% 74.3% / var(--tw-text-opacity))\n}\n}.action__question[data-v-0c2c8ba6],.filter__operator[data-v-0c2c8ba6]{margin-bottom:0px;margin-right:0.25rem\n}.action__question[data-v-0c2c8ba6]{max-width:50%\n}.action__question.full-width[data-v-0c2c8ba6]{max-width:100%\n}.filter__answer--wrap[data-v-0c2c8ba6]{margin-right:0.25rem;display:flex;width:100%;max-width:50%;flex-grow:1;align-items:center;justify-content:flex-start\n}.filter__answer--wrap input[data-v-0c2c8ba6]{margin-bottom:0px\n}.filter__answer.answer--text-input[data-v-0c2c8ba6]{margin-bottom:0px\n}.filter__join-operator-wrap[data-v-0c2c8ba6]{position:relative;z-index:20;margin:0px\n}.filter__join-operator[data-v-0c2c8ba6]{position:relative;margin-top:0.625rem;margin-bottom:0.625rem;margin-left:0px;margin-right:0px;display:flex;align-items:center;justify-content:center\n}.filter__join-operator .operator__line[data-v-0c2c8ba6]{position:absolute;width:100%;border-bottom-width:1px;border-style:solid;--tw-border-opacity:1;border-color:hsl(209 12.2% 93.2% / 1)\n}@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)){\n.filter__join-operator .operator__line[data-v-0c2c8ba6]{border-color:hsl(209 12.2% 93.2% / var(--tw-border-opacity))\n}\n}[data-v-0c2c8ba6]:is(.dark .filter__join-operator .operator__line){--tw-border-opacity:1;border-color:hsl(206 6.0% 43.5% / 1)\n}@supports (color: hsl(0 0% 0% / 0)) and (top: var(--f)){\n[data-v-0c2c8ba6]:is(.dark .filter__join-operator .operator__line){border-color:hsl(206 6.0% 43.5% / var(--tw-border-opacity))\n}\n}.filter__join-operator .operator__select[data-v-0c2c8ba6]{margin-bottom:var(--space-zero) !important;position:relative;width:auto}.multiselect[data-v-0c2c8ba6]{margin-bottom:0px\n}.action-message[data-v-0c2c8ba6]{margin-left:0px;margin-right:0px;margin-top:0.5rem;margin-bottom:0px\n}[data-v-0c2c8ba6] .ProseMirror-menubar{display:none\n}","",{version:3,sources:["/home/leonardo/chatwoot/app/javascript/dashboard/components/widgets/AutomationActionInput.vue"],names:[],mappings:"AAEE,yBAAA,oBAAA,CAAA,sBAAA,CAAA,gBAAA,CAAA,kBAAA,CAAA,qBAAA,CAAA,qCAAA,CAAA,iBAAA,CAAA,yCAAA,CAAA;AAAA;AAAA;AAAA,yBAAA,4DAAA,CAAA;AAAA;AAAA;AAAA,oCAAA,qBAAA,CAAA,oCAAA,CAAA,iBAAA,CAAA;AAAA;AAAA;AAAA,oCAAA,2DAAA,CAAA;AAAA;AAAA,CAGE,oCAAA,iBAAA,CAAA,iBAAA,CAAA,gBAAA,CAAA,iBAAA,CAAA,qCAAA,CAAA;AAAA,CAAA;AAAA,oCAAA;AAAA;AAAA,CAAA,+CAAA,iBAAA,CAAA;AAAA,CAAA;AAAA,+CAAA;AAAA;AAAA,CAKF,mCAAA;AAAA,CAIA,mCAAA,qBAAA,CAAA,qCAAA,CAAA,iBAAA,CAAA;AAAA,CAAA;AAAA,mCAAA,4DAAA,CAAA;AAAA;AAAA,CAAA,8CAAA,uCAAA,CAAA;AAAA,CAIA,gCAAA;AAAA,CAIA,+BAAA,kBAAA,CAAA,qBAAA,CAAA,eAAA,CAAA,gBAAA,CAAA,aAAA,CAAA,mBAAA,CAAA;AAAA,CAAA;AAAA,+BAAA;AAAA;AAAA,CAAA,0CAAA,mBAAA,CAAA;AAAA,CAAA;AAAA,0CAAA;AAAA;AAAA,CAKA,sEAAA,iBAAA,CAAA;AAAA,CAIA,mCAAA;AAAA,CAIA,8CAAA;AAAA,CAIA,uCAAA,oBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,aAAA,CAAA,WAAA,CAAA,kBAAA,CAAA;AAAA,CAGE,6CAAA;AAAA,CAKA,oDAAA;AAAA,CAKF,6CAAA,iBAAA,CAAA,UAAA,CAAA;AAAA,CAIA,wCAAA,iBAAA,CAAA,mBAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,gBAAA,CAAA,YAAA,CAAA,kBAAA,CAAA;AAAA,CAGE,wDAAA,iBAAA,CAAA,UAAA,CAAA,uBAAA,CAAA,kBAAA,CAAA,qBAAA,CAAA;AAAA,CAAA;AAAA,wDAAA;AAAA;AAAA,CAAA,mEAAA,qBAAA,CAAA;AAAA,CAAA;AAAA,mEAAA;AAAA;AAAA,CAGF,0DACE,0CAAA,CACA,iBAAA,CAAA,UAAA,CAKF,8BAAA;AAAA,CAGA,iCAAA,eAAA,CAAA,gBAAA,CAAA,iBAAA,CAAA;AAAA,CAIA,uCAAA;AAAA",file:"AutomationActionInput.vue",sourcesContent:["\n.filter {\n  @apply bg-slate-50 dark:bg-slate-800 p-2 border border-solid border-slate-75 dark:border-slate-600 rounded-md mb-2;\n\n  &.is-a-macro {\n    @apply mb-0 bg-white dark:bg-slate-700 p-0 border-0 rounded-none;\n  }\n}\n\n.no-margin-bottom {\n  @apply mb-0;\n}\n\n.filter.has-error {\n  @apply bg-red-50 dark:bg-red-800/50 border-red-100 dark:border-red-700/50;\n}\n\n.filter-inputs {\n  @apply flex;\n}\n\n.filter-error {\n  @apply text-red-500 dark:text-red-200 block my-1 mx-0;\n}\n\n.action__question,\n.filter__operator {\n  @apply mb-0 mr-1;\n}\n\n.action__question {\n  @apply max-w-[50%];\n}\n\n.action__question.full-width {\n  @apply max-w-full;\n}\n\n.filter__answer--wrap {\n  @apply max-w-[50%] flex-grow mr-1 flex w-full items-center justify-start;\n\n  input {\n    @apply mb-0;\n  }\n}\n.filter__answer {\n  &.answer--text-input {\n    @apply mb-0;\n  }\n}\n\n.filter__join-operator-wrap {\n  @apply relative z-20 m-0;\n}\n\n.filter__join-operator {\n  @apply flex items-center justify-center relative my-2.5 mx-0;\n\n  .operator__line {\n    @apply absolute w-full border-b border-solid border-slate-75 dark:border-slate-600;\n  }\n\n  .operator__select {\n    margin-bottom: var(--space-zero) !important;\n    @apply relative w-auto;\n  }\n}\n\n.multiselect {\n  @apply mb-0;\n}\n.action-message {\n  @apply mt-2 mx-0 mb-0;\n}\n// Prosemirror does not have a native way of hiding the menu bar, hence\n::v-deep .ProseMirror-menubar {\n  @apply hidden;\n}\n"]}]),t.exports=e}}]);
//# sourceMappingURL=17-238e8f042eed8981bdb0.chunk.js.map