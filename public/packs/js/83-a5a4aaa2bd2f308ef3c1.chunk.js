(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{1704:function(t,e,n){var s=n(65),r=n(1814);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var a={insert:"head",singleton:!1};s(r,a);t.exports=r.locals||{}},1813:function(t,e,n){"use strict";n(1704)},1814:function(t,e,n){(e=n(66)(!0)).push([t.i,"\ninput[data-v-64f4ebf2] {\n    margin-bottom: 0px\n}\n","",{version:3,sources:["/home/leonardo/chatwoot/app/javascript/dashboard/routes/dashboard/settings/teams/AgentSelector.vue"],names:[],mappings:";AAqJA;IAAA;AAAA",file:"AgentSelector.vue",sourcesContent:['<script>\nimport Thumbnail from \'dashboard/components/widgets/Thumbnail.vue\';\n\nexport default {\n  components: {\n    Thumbnail,\n  },\n  props: {\n    agentList: {\n      type: Array,\n      default: () => [],\n    },\n    selectedAgents: {\n      type: Array,\n      default: () => [],\n    },\n    updateSelectedAgents: {\n      type: Function,\n      default: () => {},\n    },\n    isWorking: {\n      type: Boolean,\n      default: false,\n    },\n    submitButtonText: {\n      type: String,\n      default: \'\',\n    },\n  },\n  data() {\n    return {};\n  },\n  computed: {\n    selectedAgentCount() {\n      return this.selectedAgents.length;\n    },\n    allAgentsSelected() {\n      return this.selectedAgents.length === this.agentList.length;\n    },\n    disableSubmitButton() {\n      return this.selectedAgentCount === 0;\n    },\n  },\n  methods: {\n    isAgentSelected(agentId) {\n      return this.selectedAgents.includes(agentId);\n    },\n    handleSelectAgent(agentId) {\n      const shouldRemove = this.isAgentSelected(agentId);\n\n      let result = [];\n      if (shouldRemove) {\n        result = this.selectedAgents.filter(item => item !== agentId);\n      } else {\n        result = [...this.selectedAgents, agentId];\n      }\n\n      this.updateSelectedAgents(result);\n    },\n    selectAllAgents() {\n      const result = this.agentList.map(item => item.id);\n      this.updateSelectedAgents(result);\n    },\n    agentRowClass(agentId) {\n      return { \'is-active\': this.isAgentSelected(agentId) };\n    },\n  },\n};\n<\/script>\n\n<template>\n  <div>\n    <div class="add-agents__header" />\n    <table class="woot-table">\n      <thead>\n        <tr>\n          <td class="ltr:pl-2.5 rtl:pr-2.5">\n            <div class="flex items-center">\n              <input\n                name="select-all-agents"\n                type="checkbox"\n                :checked="allAgentsSelected ? \'checked\' : \'\'"\n                :title="$t(\'TEAMS_SETTINGS.AGENTS.SELECT_ALL\')"\n                @click.self="selectAllAgents"\n              />\n            </div>\n          </td>\n          <td class="text-slate-800 dark:text-slate-100 ltr:pl-2.5 rtl:pr-2.5">\n            {{ $t(\'TEAMS_SETTINGS.AGENTS.AGENT\') }}\n          </td>\n          <td class="text-slate-800 dark:text-slate-100 ltr:pl-2.5 rtl:pr-2.5">\n            {{ $t(\'TEAMS_SETTINGS.AGENTS.EMAIL\') }}\n          </td>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for="agent in agentList"\n          :key="agent.id"\n          :class="agentRowClass(agent.id)"\n        >\n          <td class="w-12">\n            <div class="flex items-center">\n              <input\n                type="checkbox"\n                :checked="isAgentSelected(agent.id)"\n                @click.self="() => handleSelectAgent(agent.id)"\n              />\n            </div>\n          </td>\n          <td>\n            <div class="flex items-center gap-2">\n              <Thumbnail\n                :src="agent.thumbnail"\n                size="24px"\n                :username="agent.name"\n                :status="agent.availability_status"\n              />\n              <h4 class="text-base mb-0 text-slate-800 dark:text-slate-100">\n                {{ agent.name }}\n              </h4>\n            </div>\n          </td>\n          <td>\n            {{ agent.email || \'---\' }}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <div class="flex items-center justify-between mt-2">\n      <p>\n        {{\n          $t(\'TEAMS_SETTINGS.AGENTS.SELECTED_COUNT\', {\n            selected: selectedAgents.length,\n            total: agentList.length,\n          })\n        }}\n      </p>\n      <woot-submit-button\n        :button-text="submitButtonText"\n        :loading="isWorking"\n        :disabled="disableSubmitButton"\n      />\n    </div>\n  </div>\n</template>\n\n<style scoped>\ninput {\n  @apply mb-0;\n}\n</style>\n']}]),t.exports=e},1911:function(t,e,n){"use strict";n(77),n(93),n(21),n(41),n(83),n(10),n(32),n(9),n(34),n(14),n(17),n(20),n(67),n(59),n(44);function s(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}var a={components:{Thumbnail:n(250).a},props:{agentList:{type:Array,default:function(){return[]}},selectedAgents:{type:Array,default:function(){return[]}},updateSelectedAgents:{type:Function,default:function(){}},isWorking:{type:Boolean,default:!1},submitButtonText:{type:String,default:""}},data:function(){return{}},computed:{selectedAgentCount:function(){return this.selectedAgents.length},allAgentsSelected:function(){return this.selectedAgents.length===this.agentList.length},disableSubmitButton:function(){return 0===this.selectedAgentCount}},methods:{isAgentSelected:function(t){return this.selectedAgents.includes(t)},handleSelectAgent:function(t){var e=[];e=this.isAgentSelected(t)?this.selectedAgents.filter((function(e){return e!==t})):[].concat(s(this.selectedAgents),[t]),this.updateSelectedAgents(e)},selectAllAgents:function(){var t=this.agentList.map((function(t){return t.id}));this.updateSelectedAgents(t)},agentRowClass:function(t){return{"is-active":this.isAgentSelected(t)}}}},i=(n(1813),n(8)),l=Object(i.a)(a,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"add-agents__header"}),t._v(" "),e("table",{staticClass:"woot-table"},[e("thead",[e("tr",[e("td",{staticClass:"ltr:pl-2.5 rtl:pr-2.5"},[e("div",{staticClass:"flex items-center"},[e("input",{attrs:{name:"select-all-agents",type:"checkbox",title:t.$t("TEAMS_SETTINGS.AGENTS.SELECT_ALL")},domProps:{checked:t.allAgentsSelected?"checked":""},on:{click:function(e){return e.target!==e.currentTarget?null:t.selectAllAgents.apply(null,arguments)}}})])]),t._v(" "),e("td",{staticClass:"text-slate-800 dark:text-slate-100 ltr:pl-2.5 rtl:pr-2.5"},[t._v("\n          "+t._s(t.$t("TEAMS_SETTINGS.AGENTS.AGENT"))+"\n        ")]),t._v(" "),e("td",{staticClass:"text-slate-800 dark:text-slate-100 ltr:pl-2.5 rtl:pr-2.5"},[t._v("\n          "+t._s(t.$t("TEAMS_SETTINGS.AGENTS.EMAIL"))+"\n        ")])])]),t._v(" "),e("tbody",t._l(t.agentList,(function(n){return e("tr",{key:n.id,class:t.agentRowClass(n.id)},[e("td",{staticClass:"w-12"},[e("div",{staticClass:"flex items-center"},[e("input",{attrs:{type:"checkbox"},domProps:{checked:t.isAgentSelected(n.id)},on:{click:function(e){return e.target!==e.currentTarget?null:(()=>t.handleSelectAgent(n.id)).apply(null,arguments)}}})])]),t._v(" "),e("td",[e("div",{staticClass:"flex items-center gap-2"},[e("Thumbnail",{attrs:{src:n.thumbnail,size:"24px",username:n.name,status:n.availability_status}}),t._v(" "),e("h4",{staticClass:"text-base mb-0 text-slate-800 dark:text-slate-100"},[t._v("\n              "+t._s(n.name)+"\n            ")])],1)]),t._v(" "),e("td",[t._v("\n          "+t._s(n.email||"---")+"\n        ")])])})),0)]),t._v(" "),e("div",{staticClass:"flex items-center justify-between mt-2"},[e("p",[t._v("\n      "+t._s(t.$t("TEAMS_SETTINGS.AGENTS.SELECTED_COUNT",{selected:t.selectedAgents.length,total:t.agentList.length}))+"\n    ")]),t._v(" "),e("woot-submit-button",{attrs:{"button-text":t.submitButtonText,loading:t.isWorking,disabled:t.disableSubmitButton}})],1)])}),[],!1,null,"64f4ebf2",null);e.a=l.exports},2542:function(t,e,n){"use strict";n.r(e);n(33),n(44),n(83),n(54),n(75),n(24),n(10),n(21),n(29),n(23),n(30),n(9),n(22),n(32),n(34),n(14),n(17),n(20),n(67),n(59);var s=n(38),r=n(252),a=n(64),i=n(118),l=n(200),c=n(166),o=n(1911);function u(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function g(t,e,n,s,r,a,i){try{var l=t[a](i),c=l.value}catch(o){return void n(o)}l.done?e(c):Promise.resolve(c).then(s,r)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(s,r){var a=t.apply(e,n);function i(t){g(a,s,r,i,l,"next",t)}function l(t){g(a,s,r,i,l,"throw",t)}i(void 0)}))}}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A={components:{Spinner:l.a,PageHeader:c.a,AgentSelector:o.a},validations:{selectedAgents:{isEmpty:function(){return!!this.selectedAgents.length}}},setup:function(){return{v$:Object(i.a)()}},data:function(){return{selectedAgents:[],isCreating:!1}},computed:f(f({},Object(s.mapGetters)({agentList:"agents/getAgents",uiFlags:"teamMembers/getUIFlags"})),{},{teamId:function(){return this.$route.params.teamId},headerTitle:function(){return this.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.TITLE",{teamName:this.currentTeam.name})},currentTeam:function(){return this.$store.getters["teams/getTeam"](this.teamId)},teamMembers:function(){return this.$store.getters["teamMembers/getTeamMembers"](this.teamId)},showAgentsList:function(){return this.currentTeam.id&&!this.uiFlags.isFetching}}),mounted:function(){var t=this;return p(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$route.params.teamId,t.$store.dispatch("agents/get"),e.prev=2,e.next=5,t.$store.dispatch("teamMembers/get",{teamId:n});case 5:s=t.teamMembers.map((function(t){return t.id})),t.updateSelectedAgents(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t.updateSelectedAgents([]);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},methods:{updateSelectedAgents:function(t){this.v$.selectedAgents.$touch(),this.selectedAgents=u(t)},addAgents:function(){var t=this;return p(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isCreating=!0,n=t.teamId,s=t.selectedAgents,e.prev=2,e.next=5,t.$store.dispatch("teamMembers/update",{teamId:n,agentsList:s});case 5:r.a.replace({name:"settings_teams_edit_finish",params:{page:"edit",teamId:n}}),t.$store.dispatch("teams/get"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Object(a.a)(e.t0.message);case 12:t.isCreating=!1;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}}},b=n(8),S=Object(b.a)(A,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"border border-slate-25 overflow-x-auto dark:border-slate-800/60 bg-white dark:bg-slate-900 h-full p-6 w-full max-w-full md:w-3/4 md:max-w-[75%] flex-shrink-0 flex-grow-0"},[e("form",{staticClass:"flex flex-wrap mx-0 overflow-x-auto",on:{submit:function(e){return e.preventDefault(),t.addAgents.apply(null,arguments)}}},[e("div",{staticClass:"w-full"},[e("PageHeader",{attrs:{"header-title":t.headerTitle,"header-content":t.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.DESC")}})],1),t._v(" "),e("div",{staticClass:"w-full"},[t.v$.selectedAgents.$error?e("div",[e("p",{staticClass:"error-message"},[t._v("\n          "+t._s(t.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR"))+"\n        ")])]):t._e(),t._v(" "),t.showAgentsList?e("AgentSelector",{attrs:{"agent-list":t.agentList,"selected-agents":t.selectedAgents,"update-selected-agents":t.updateSelectedAgents,"is-working":t.isCreating,"submit-button-text":t.$t("TEAMS_SETTINGS.EDIT_FLOW.AGENTS.BUTTON_TEXT")}}):e("Spinner")],1)])])}),[],!1,null,null,null);e.default=S.exports}}]);
//# sourceMappingURL=83-a5a4aaa2bd2f308ef3c1.chunk.js.map